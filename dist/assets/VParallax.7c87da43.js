import{g as R,b3 as S,i as $,ae as w,r as H,b4 as M,ab as c,ac as z,j as I,aQ as q,k as A,l as F,a0 as N,b5 as O}from"./index.2383f90a.js";function T(s){return Math.floor(Math.abs(s))*Math.sign(s)}const _=R()({name:"VParallax",props:{scale:{type:[Number,String],default:.5}},setup(s,h){let{slots:d}=h;const{intersectionRef:o,isIntersecting:r}=S(),{resizeRef:b,contentRect:i}=$(),{height:x}=w(),l=H();M(()=>{var t;o.value=b.value=(t=l.value)==null?void 0:t.$el});let e;c(r,t=>{t?(e=O(o.value),e=e===document.scrollingElement?document:e,e.addEventListener("scroll",a,{passive:!0}),a()):e.removeEventListener("scroll",a)}),z(()=>{e==null||e.removeEventListener("scroll",a)}),c(x,a),c(()=>{var t;return(t=i.value)==null?void 0:t.height},a);const u=I(()=>1-q(+s.scale));let m=-1;function a(){!r.value||(cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var f,p,g;const t=((f=l.value)==null?void 0:f.$el).querySelector(".v-img__img");if(!t)return;const v=(p=e.clientHeight)!=null?p:document.documentElement.clientHeight,y=(g=e.scrollTop)!=null?g:window.scrollY,E=o.value.offsetTop,n=i.value.height,V=E+(n-v)/2,L=T((y-V)*u.value),P=Math.max(1,(u.value*(v-n)+n)/n);t.style.setProperty("transform",`translateY(${L}px) scale(${P})`)}))}return A(()=>F(N,{class:["v-parallax",{"v-parallax--active":r.value}],ref:l,cover:!0,onLoadstart:a,onLoad:a},d)),{}}});export{_ as V};
